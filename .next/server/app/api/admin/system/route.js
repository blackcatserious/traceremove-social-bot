"use strict";(()=>{var e={};e.id=1775,e.ids=[1775,3594],e.modules={21841:e=>{e.exports=require("@aws-sdk/client-s3")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},87561:e=>{e.exports=require("node:fs")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},71017:e=>{e.exports=require("path")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},71267:e=>{e.exports=require("worker_threads")},59796:e=>{e.exports=require("zlib")},87767:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>I,patchFetch:()=>S,requestAsyncStorage:()=>_,routeModule:()=>E,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>A});var n={};t.r(n),t.d(n,{GET:()=>m,POST:()=>p,dynamic:()=>d,runtime:()=>u});var o=t(10884),s=t(16132),a=t(21040),i=t(95798),c=t(28977),l=t(35747);let u="nodejs",d="force-dynamic";async function m(e){try{let e=(0,l.Bd)();if(!e)throw Error("System configuration not available");let{performHealthChecks:r,generateSystemReport:n}=await t.e(7356).then(t.bind(t,47356)),{getPerformanceStats:o}=await t.e(1124).then(t.bind(t,41124)),{getCacheStats:s}=await t.e(1087).then(t.bind(t,81087)),[a,c,u,d]=await Promise.all([r(),n(),o(),s()]);return i.Z.json({timestamp:new Date().toISOString(),environment:{nodeEnv:"production",version:process.env.npm_package_version||"1.0.0",uptime:process.uptime(),memoryUsage:process.memoryUsage()},configuration:{multiModelProviders:{openai:!!e.openai.apiKey,anthropic:!!e.multiModel.anthropic,google:!!e.multiModel.google,mistral:!!e.multiModel.mistral,groq:!!e.multiModel.groq},databases:{postgresql:!!e.database.pgDsn,vector:!!e.vector.qdrantUrl,cache:!!e.cache.redisUrl},etl:{batchSize:e.etl.batchSize,maxRetries:e.etl.maxRetries,fullSyncInterval:e.etl.fullSyncInterval,incrementalSyncInterval:e.etl.incrementalSyncInterval},monitoring:{enablePerformanceTracking:e.monitoring.enablePerformanceTracking,enableHealthChecks:e.monitoring.enableHealthChecks,logLevel:e.monitoring.logLevel}},health:{checks:a,summary:c.summary,recommendations:c.recommendations},performance:u,cache:d})}catch(t){let{response:e,status:r}=(0,c.$G)(t);return i.Z.json(e,{status:r})}}async function p(e){try{let r=await e.json(),{action:n,params:o}=r;switch(n){case"clear_cache":let{clearAdvancedCache:s}=await t.e(1087).then(t.bind(t,81087));return s(),i.Z.json({success:!0,message:"Cache cleared successfully"});case"trigger_etl":let{fullSync:a}=await Promise.all([t.e(9809),t.e(8830),t.e(3326),t.e(2082)]).then(t.bind(t,12082)),c=await a();return i.Z.json({success:!0,results:c});case"health_check":let{performHealthChecks:l}=await t.e(7356).then(t.bind(t,47356)),u=await l();return i.Z.json({success:!0,checks:u});default:throw Error(`Unknown action: ${n}`)}}catch(t){let{response:e,status:r}=(0,c.$G)(t);return i.Z.json(e,{status:r})}}let E=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/system/route",pathname:"/api/admin/system",filename:"route",bundlePath:"app/api/admin/system/route"},resolvedPagePath:"/workspaces/traceremove-social-bot/src/app/api/admin/system/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:_,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:v,staticGenerationBailout:A}=E,I="/api/admin/system/route";function S(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},35747:(e,r,t)=>{t.d(r,{Bd:()=>o,ZO:()=>s,jQ:()=>i,yK:()=>a});class n extends Error{constructor(e,r){super(e),this.missingVars=r,this.name="EnvironmentValidationError"}}function o(){try{return function(){let e=[],r=[];function t(r){let t=process.env[r];return t||(e.push(r),"")}function o(e,t){let n=process.env[e];return n||void 0===t?n||void 0:(r.push(`${e} not set, using default: ${t}`),t)}function s(e,t){let n=process.env[e];if(!n)return void 0!==t?(r.push(`${e} not set, using default: ${t}`),t):void 0;let o=parseInt(n,10);return isNaN(o)?(r.push(`${e} is not a valid number, ignoring`),t):o}function a(e,t){let n=process.env[e];return n?"true"===n.toLowerCase():void 0!==t?(r.push(`${e} not set, using default: ${t}`),t):void 0}let i={openai:{apiKey:t("OPENAI_API_KEY")},multiModel:{anthropic:o("ANTHROPIC_API_KEY"),google:o("GOOGLE_API_KEY"),mistral:o("MISTRAL_API_KEY"),groq:o("GROQ_API_KEY")},notion:{token:t("NOTION_TOKEN"),databases:{registry:t("NOTION_DB_REGISTRY"),cases:t("NOTION_DB_CASES"),finance:t("NOTION_DB_FINANCE"),publishing:t("NOTION_DB_PUBLISHING")}},database:{pgDsn:t("PG_DSN"),poolMin:s("PG_POOL_MIN",2),poolMax:s("PG_POOL_MAX",20)},vector:{qdrantUrl:t("QDRANT_URL"),qdrantApiKey:t("QDRANT_API_KEY"),collectionName:o("QDRANT_COLLECTION_NAME","traceremove_vectors"),dimension:s("VECTOR_DIMENSION",1536)},cache:{redisUrl:o("UPSTASH_REDIS_REST_URL"),redisToken:o("UPSTASH_REDIS_REST_TOKEN"),ttlSearch:s("CACHE_TTL_SEARCH",3600),ttlDatabase:s("CACHE_TTL_DATABASE",1800),maxSize:s("CACHE_MAX_SIZE",1e3)},security:{cronSecret:t("CRON_SECRET"),rateLimitRequests:s("RATE_LIMIT_REQUESTS",100),rateLimitWindow:s("RATE_LIMIT_WINDOW",60)},monitoring:{logLevel:o("LOG_LEVEL","info"),logFormat:o("LOG_FORMAT","json"),enablePerformanceTracking:a("ENABLE_PERFORMANCE_TRACKING",!0),enableHealthChecks:a("ENABLE_HEALTH_CHECKS",!0)},etl:{fullSyncInterval:s("ETL_FULL_SYNC_INTERVAL",1440),incrementalSyncInterval:s("ETL_INCREMENTAL_SYNC_INTERVAL",60),batchSize:s("ETL_BATCH_SIZE",100),maxRetries:s("ETL_MAX_RETRIES",3)},development:{debugMode:a("DEBUG_MODE",!1),mockExternalApis:a("MOCK_EXTERNAL_APIS",!1),skipHealthChecks:a("SKIP_HEALTH_CHECKS",!1)}};if(r.length>0&&i.development.debugMode&&console.warn("Environment validation warnings:",r),e.length>0)throw new n(`Missing required environment variables: ${e.join(", ")}. Please check your .env.local file and ensure all required variables are set.`,e);return i}()}catch(e){if(e instanceof n)return console.error("Environment validation failed:",e.message),null;throw e}}function s(){return process.env.LOG_LEVEL||"info"}function a(){return"true"===process.env.DEBUG_MODE}function i(){return"true"===process.env.MOCK_EXTERNAL_APIS}},28977:(e,r,t)=>{t.d(r,{$G:()=>i,JN:()=>c,id:()=>s,p8:()=>o});class n extends Error{constructor(e,r=500,t,n){super(e),this.statusCode=r,this.code=t,this.details=n,this.name="APIError"}}class o extends n{constructor(e,r){super(e,400,"VALIDATION_ERROR",r),this.name="ValidationError"}}class s extends n{constructor(e,r,t){super(`${e} service error: ${r}`,502,"EXTERNAL_SERVICE_ERROR",t),this.name="ExternalServiceError"}}function a(e,r){let t={error:e.message,timestamp:new Date().toISOString()};return r&&(t.requestId=r),e instanceof n&&(t.code=e.code,t.details=e.details),t}function i(e){return(console.error("API Error:",e),e instanceof n)?{response:a(e),status:e.statusCode}:e instanceof Error?{response:a(e),status:500}:{response:{error:"An unexpected error occurred",timestamp:new Date().toISOString()},status:500}}async function c(e,r=3,t=1e3,n=2){let o;for(let s=1;s<=r;s++)try{return await e()}catch(a){if(o=a instanceof Error?a:Error(String(a)),s===r)throw o;let e=t*Math.pow(n,s-1);console.warn(`Attempt ${s} failed, retrying in ${e}ms:`,o.message),await new Promise(r=>setTimeout(r,e))}throw o}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[3271,8107],()=>t(87767));module.exports=n})();