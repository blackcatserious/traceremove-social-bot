"use strict";exports.id=3594,exports.ids=[3594],exports.modules={35747:(e,r,t)=>{t.d(r,{Bd:()=>s,ZO:()=>o,jQ:()=>a,yK:()=>i});class n extends Error{constructor(e,r){super(e),this.missingVars=r,this.name="EnvironmentValidationError"}}function s(){try{return function(){let e=[],r=[];function t(r){let t=process.env[r];return t||(e.push(r),"")}function s(e,t){let n=process.env[e];return n||void 0===t?n||void 0:(r.push(`${e} not set, using default: ${t}`),t)}function o(e,t){let n=process.env[e];if(!n)return void 0!==t?(r.push(`${e} not set, using default: ${t}`),t):void 0;let s=parseInt(n,10);return isNaN(s)?(r.push(`${e} is not a valid number, ignoring`),t):s}function i(e,t){let n=process.env[e];return n?"true"===n.toLowerCase():void 0!==t?(r.push(`${e} not set, using default: ${t}`),t):void 0}let a={openai:{apiKey:t("OPENAI_API_KEY")},multiModel:{anthropic:s("ANTHROPIC_API_KEY"),google:s("GOOGLE_API_KEY"),mistral:s("MISTRAL_API_KEY"),groq:s("GROQ_API_KEY")},notion:{token:t("NOTION_TOKEN"),databases:{registry:t("NOTION_DB_REGISTRY"),cases:t("NOTION_DB_CASES"),finance:t("NOTION_DB_FINANCE"),publishing:t("NOTION_DB_PUBLISHING")}},database:{pgDsn:t("PG_DSN"),poolMin:o("PG_POOL_MIN",2),poolMax:o("PG_POOL_MAX",20)},vector:{qdrantUrl:t("QDRANT_URL"),qdrantApiKey:t("QDRANT_API_KEY"),collectionName:s("QDRANT_COLLECTION_NAME","traceremove_vectors"),dimension:o("VECTOR_DIMENSION",1536)},cache:{redisUrl:s("UPSTASH_REDIS_REST_URL"),redisToken:s("UPSTASH_REDIS_REST_TOKEN"),ttlSearch:o("CACHE_TTL_SEARCH",3600),ttlDatabase:o("CACHE_TTL_DATABASE",1800),maxSize:o("CACHE_MAX_SIZE",1e3)},security:{cronSecret:t("CRON_SECRET"),rateLimitRequests:o("RATE_LIMIT_REQUESTS",100),rateLimitWindow:o("RATE_LIMIT_WINDOW",60)},monitoring:{logLevel:s("LOG_LEVEL","info"),logFormat:s("LOG_FORMAT","json"),enablePerformanceTracking:i("ENABLE_PERFORMANCE_TRACKING",!0),enableHealthChecks:i("ENABLE_HEALTH_CHECKS",!0)},etl:{fullSyncInterval:o("ETL_FULL_SYNC_INTERVAL",1440),incrementalSyncInterval:o("ETL_INCREMENTAL_SYNC_INTERVAL",60),batchSize:o("ETL_BATCH_SIZE",100),maxRetries:o("ETL_MAX_RETRIES",3)},development:{debugMode:i("DEBUG_MODE",!1),mockExternalApis:i("MOCK_EXTERNAL_APIS",!1),skipHealthChecks:i("SKIP_HEALTH_CHECKS",!1)}};if(r.length>0&&a.development.debugMode&&console.warn("Environment validation warnings:",r),e.length>0)throw new n(`Missing required environment variables: ${e.join(", ")}. Please check your .env.local file and ensure all required variables are set.`,e);return a}()}catch(e){if(e instanceof n)return console.error("Environment validation failed:",e.message),null;throw e}}function o(){return process.env.LOG_LEVEL||"info"}function i(){return"true"===process.env.DEBUG_MODE}function a(){return"true"===process.env.MOCK_EXTERNAL_APIS}},28977:(e,r,t)=>{t.d(r,{$G:()=>a,JN:()=>E,id:()=>o,p8:()=>s});class n extends Error{constructor(e,r=500,t,n){super(e),this.statusCode=r,this.code=t,this.details=n,this.name="APIError"}}class s extends n{constructor(e,r){super(e,400,"VALIDATION_ERROR",r),this.name="ValidationError"}}class o extends n{constructor(e,r,t){super(`${e} service error: ${r}`,502,"EXTERNAL_SERVICE_ERROR",t),this.name="ExternalServiceError"}}function i(e,r){let t={error:e.message,timestamp:new Date().toISOString()};return r&&(t.requestId=r),e instanceof n&&(t.code=e.code,t.details=e.details),t}function a(e){return(console.error("API Error:",e),e instanceof n)?{response:i(e),status:e.statusCode}:e instanceof Error?{response:i(e),status:500}:{response:{error:"An unexpected error occurred",timestamp:new Date().toISOString()},status:500}}async function E(e,r=3,t=1e3,n=2){let s;for(let o=1;o<=r;o++)try{return await e()}catch(i){if(s=i instanceof Error?i:Error(String(i)),o===r)throw s;let e=t*Math.pow(n,o-1);console.warn(`Attempt ${o} failed, retrying in ${e}ms:`,s.message),await new Promise(r=>setTimeout(r,e))}throw s}}};