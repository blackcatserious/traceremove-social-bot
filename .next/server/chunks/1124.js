"use strict";exports.id=1124,exports.ids=[1124],exports.modules={41124:(e,t,r)=>{r.r(t),r.d(t,{getPerformanceStats:()=>a,measurePerformance:()=>n,measureQuery:()=>c,performanceMonitor:()=>i});class s{recordMetric(e){this.metrics.push(e),this.metrics.length>this.maxMetrics&&this.metrics.shift()}recordQuery(e){this.queryMetrics.push(e),this.queryMetrics.length>this.maxMetrics&&this.queryMetrics.shift()}getAverageResponseTime(e=5){let t=new Date(Date.now()-6e4*e),r=this.metrics.filter(e=>new Date(e.timestamp)>t);return 0===r.length?0:r.reduce((e,t)=>e+t.responseTime,0)/r.length}getSlowestQueries(e=10){return[...this.queryMetrics].sort((e,t)=>t.duration-e.duration).slice(0,e)}getMetricsSummary(){let e=this.getAverageResponseTime(),t=this.metrics.length>0?this.metrics.reduce((e,t)=>e+t.memoryUsage,0)/this.metrics.length:0,r=this.queryMetrics.filter(e=>e.duration>1e3).length;return{avgResponseTime:e,avgMemoryUsage:t,totalQueries:this.queryMetrics.length,slowQueries:r}}clearOldMetrics(e=24){let t=new Date(Date.now()-36e5*e);this.metrics=this.metrics.filter(e=>new Date(e.timestamp)>t),this.queryMetrics=this.queryMetrics.filter(e=>new Date(e.timestamp)>t)}constructor(){this.metrics=[],this.queryMetrics=[],this.maxMetrics=1e3}}let i=new s;function a(){let e=i.getMetricsSummary();return{totalQueries:e.totalQueries,averageQueryTime:e.avgResponseTime,slowQueries:e.slowQueries}}function n(e,t){return new Promise(async(t,r)=>{let s=Date.now(),a=process.memoryUsage().heapUsed;try{let r=await e(),n=Date.now(),c=process.memoryUsage().heapUsed;i.recordMetric({responseTime:n-s,memoryUsage:(c-a)/1024/1024,timestamp:new Date().toISOString()}),t(r)}catch(e){r(e)}})}function c(e,t){return new Promise(async(r,s)=>{let a=Date.now();try{let s=await e(),n=Date.now()-a;i.recordQuery({query:t.substring(0,100),duration:n,rows:Array.isArray(s)?s.length:1,timestamp:new Date().toISOString()}),r(s)}catch(e){s(e)}})}}};