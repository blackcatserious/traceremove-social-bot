(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4448],{7953:function(e,r,t){Promise.resolve().then(t.bind(t,3307))},3307:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return a}});var s=t(7437),n=t(2265);let i=[{id:"philosopher",name:"Digital Arthur Ziganshine",domain:"traceremove.dev"},{id:"orm-multilang",name:"Digital Arthur Ziganshine (ORM)",domain:"traceremove.com"},{id:"orm-russian",name:"Digital Arthur Ziganshine (ORM)",domain:"traceremove.io"}];function a(){let[e,r]=(0,n.useState)(""),[t,a]=(0,n.useState)(!1),[d,o]=(0,n.useState)({}),[l,c]=(0,n.useState)({}),m=()=>{e.trim()&&a(!0)},x=async r=>{c(e=>({...e,[r]:!0}));try{let t=await fetch("/api/admin/reindex?persona=".concat(r),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),s=await t.json();o(e=>({...e,[r]:s}))}catch(e){o(t=>({...t,[r]:{ok:!1,persona:r,indexed:0,timestamp:new Date().toISOString(),error:e instanceof Error?e.message:"Unknown error"}}))}finally{c(e=>({...e,[r]:!1}))}};return t?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 p-4",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"RAG Reindex Administration"}),(0,s.jsx)("button",{onClick:()=>a(!1),className:"text-secondary hover:text-primary transition-colors",children:"Logout"})]}),(0,s.jsx)("div",{className:"grid gap-6",children:i.map(e=>(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-primary mb-1",children:e.name}),(0,s.jsxs)("p",{className:"text-secondary text-sm",children:["Domain: ",e.domain]})]}),(0,s.jsx)("button",{onClick:()=>x(e.id),disabled:l[e.id],className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-primary font-medium py-2 px-4 rounded-lg transition-colors",children:l[e.id]?"Reindexing...":"Reindex"})]}),d[e.id]&&(0,s.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(d[e.id].ok?"bg-green-900 border border-green-700":"bg-red-900 border border-red-700"),children:d[e.id].ok?(0,s.jsxs)("div",{className:"text-green-100",children:[(0,s.jsx)("p",{className:"font-medium",children:"✅ Reindex completed successfully"}),(0,s.jsxs)("p",{className:"text-sm mt-1",children:["Indexed ",d[e.id].indexed," documents"]}),(0,s.jsx)("p",{className:"text-xs text-green-300 mt-1",children:new Date(d[e.id].timestamp).toLocaleString()})]}):(0,s.jsxs)("div",{className:"text-red-100",children:[(0,s.jsx)("p",{className:"font-medium",children:"❌ Reindex failed"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:d[e.id].error||"Unknown error"}),(0,s.jsx)("p",{className:"text-xs text-red-300 mt-1",children:new Date(d[e.id].timestamp).toLocaleString()})]})})]},e.id))}),(0,s.jsxs)("div",{className:"mt-8 p-4 bg-gray-700 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-primary mb-2",children:"API Usage"}),(0,s.jsxs)("div",{className:"text-sm text-gray-300 space-y-1",children:[(0,s.jsx)("p",{children:"GET /api/admin/reindex - View available personas"}),(0,s.jsx)("p",{children:"POST /api/admin/reindex?persona=<id> - Reindex specific persona"}),(0,s.jsx)("p",{className:"text-xs text-secondary mt-2",children:"Requires Authorization: Bearer <ADMIN_TOKEN> header"})]})]})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 w-full max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-primary mb-6 text-center",children:"Admin Authentication"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"password",placeholder:"Enter admin token",value:e,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 bg-gray-700 text-primary rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",onKeyPress:e=>"Enter"===e.key&&m()}),(0,s.jsx)("button",{onClick:m,className:"w-full btn-primary font-medium py-2 px-4 rounded-lg transition-colors",children:"Authenticate"})]})]})})}},622:function(e,r,t){"use strict";var s=t(2265),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,d=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,r,t){var s,i={},l=null,c=null;for(s in void 0!==t&&(l=""+t),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,s)&&!o.hasOwnProperty(s)&&(i[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===i[s]&&(i[s]=r[s]);return{$$typeof:n,type:e,key:l,ref:c,props:i,_owner:d.current}}r.Fragment=i,r.jsx=l,r.jsxs=l},7437:function(e,r,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[2971,2472,560],function(){return e(e.s=7953)}),_N_E=e.O()}]);